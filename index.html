<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campervan Power Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: auto; }
        label, input, button { display: block; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Campervan Power Calculator</h2>
        
        <label for="deviceName">Device Name:</label>
        <input type="text" id="deviceName">
        
        <label for="deviceWattage">Device Wattage (W):</label>
        <input type="number" id="deviceWattage">
        
        <label for="deviceHours">Usage per Day (hours):</label>
        <input type="number" id="deviceHours">
        
        <button onclick="addDevice()">Add Device</button>
        <button onclick="removeDevice()">Remove Selected Device</button>
        
        <h3>Devices</h3>
        <select id="deviceList" size="5" style="width: 100%;"></select>
        
        <h3>Solar Panel & Battery Inputs</h3>
        <label for="numDays">Days Off-Grid:</label>
        <input type="number" id="numDays">
        
        <label for="daylightHours">Daylight Hours per Day:</label>
        <input type="number" id="daylightHours">
        
        <label for="panelWatts">Watts per Solar Panel:</label>
        <input type="number" id="panelWatts">
        
        <label for="numPanels">Number of Panels:</label>
        <input type="number" id="numPanels">
        
        <label for="numEff">Panel Efficiency:</label>
        <input type="number" id="numEff">
        
        <button onclick="calculateBattery()">Calculate Required Battery Capacity</button>
        
        <h3>Results</h3>
        <p id="batteryCapacity">Battery Capacity Needed: -</p>
    </div>
    
    <script>
        let devices = [];

        function addDevice() {
            const name = document.getElementById("deviceName").value;
            const wattage = parseFloat(document.getElementById("deviceWattage").value);
            const hours = parseFloat(document.getElementById("deviceHours").value);
            
            if (name && wattage > 0 && hours > 0) {
                devices.push({ name, wattage, hours });
                updateDeviceList();
            }
            
            document.getElementById("deviceName").value = "";
            document.getElementById("deviceWattage").value = "";
            document.getElementById("deviceHours").value = "";
        }

        function removeDevice() {
            const list = document.getElementById("deviceList");
            if (list.selectedIndex !== -1) {
                devices.splice(list.selectedIndex, 1);
                updateDeviceList();
            }
        }

        function updateDeviceList() {
            const list = document.getElementById("deviceList");
            list.innerHTML = "";
            devices.forEach((device, index) => {
                let option = document.createElement("option");
                option.text = `${device.name} - ${device.wattage}W, ${device.hours}h`;
                list.add(option);
            });
        }

        function calculateBattery() {
            let totalEnergy = devices.reduce((sum, device) => sum + (device.wattage * device.hours), 0);
            let numDays = parseFloat(document.getElementById("numDays").value);
            let daylightHours = parseFloat(document.getElementById("daylightHours").value);
            let panelWatts = parseFloat(document.getElementById("panelWatts").value);
            let numPanels = parseFloat(document.getElementById("numPanels").value);
            let numEff = parseFloat(document.getElementById("numEff").value);
            
            if (numDays > 0 && daylightHours > 0 && panelWatts > 0 && numPanels > 0) {
                let totalSolarPower = panelWatts * numPanels * daylightHours * numEff;
                let requiredBatteryCapacity = (totalEnergy * numDays) - totalSolarPower;
                document.getElementById("batteryCapacity").innerText = `Battery Capacity Needed: ${Math.max(0, requiredBatteryCapacity.toFixed(2))} Wh`;
            }
        }
    </script>
</body>
</html>
